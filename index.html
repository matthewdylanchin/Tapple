<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tapple (Simple)</title>
    <style>
      :root {
        --r: 160px;
      }
      body {
        margin: 0;
        font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial;
        background: #0b0f17;
        color: #eef2ff;
        overflow: hidden;
      }

      .topbar {
        padding: 18px 18px 8px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 12px;
        position: relative;
        z-index: 2;
      }

      .category {
        font-size: 20px;
        font-weight: 700;
        letter-spacing: 0.2px;
      }

      .timer {
        font-variant-numeric: tabular-nums;
        font-size: 18px;
        padding: 8px 12px;
        border: 1px solid rgba(255, 255, 255, 0.12);
        border-radius: 12px;
        background: rgba(255, 255, 255, 0.06);
      }

      .controls {
        padding: 0 18px 18px;
        display: flex;
        gap: 10px;
        position: relative;
        z-index: 2;
      }

      button.ctrl {
        border: 1px solid rgba(255, 255, 255, 0.12);
        background: rgba(255, 255, 255, 0.08);
        color: #eef2ff;
        padding: 10px 12px;
        border-radius: 12px;
        cursor: pointer;
      }
      button.ctrl:hover {
        background: rgba(255, 255, 255, 0.12);
      }
      button.ctrl:active {
        transform: translateY(1px);
      }

      .board {
        width: 100vw;
        height: calc(100vh - 110px);
        display: grid;
        place-items: center;
        position: relative;
        z-index: 1;
      }

      .ring {
        position: relative;
        width: calc(var(--r) * 2 + 140px);
        height: calc(var(--r) * 2 + 140px);
      }

      .letter {
        position: absolute;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
        width: 54px;
        height: 54px;
        border-radius: 999px;
        border: 1px solid rgba(255, 255, 255, 0.14);
        background: rgba(255, 255, 255, 0.08);
        color: #eef2ff;
        font-weight: 800;
        font-size: 18px;
        cursor: pointer;
        display: grid;
        place-items: center;
        user-select: none;
        transition: transform 120ms ease, opacity 200ms ease, filter 200ms ease;
      }
      .letter:hover {
        filter: brightness(1.15);
      }
      .letter:active {
        transform: translate(-50%, -50%) scale(0.96);
      }

      .letter.used {
        opacity: 0.22;
        cursor: not-allowed;
        filter: grayscale(0.8);
      }

      .hint {
        position: absolute;
        bottom: 10px;
        opacity: 0.7;
        font-size: 12px;
      }

      /* Urgency effects */
      .shake {
        animation: shake 180ms infinite linear;
      }
      @keyframes shake {
        0% {
          transform: translate(0, 0);
        }
        25% {
          transform: translate(1px, 0);
        }
        50% {
          transform: translate(0, 1px);
        }
        75% {
          transform: translate(-1px, 0);
        }
        100% {
          transform: translate(0, -1px);
        }
      }

      /* Explosion overlay */
      .boom {
        pointer-events: none;
        position: fixed;
        inset: 0;
        opacity: 0;
        background: radial-gradient(
          circle at 50% 60%,
          rgba(255, 120, 0, 0.9),
          rgba(255, 0, 90, 0.55),
          rgba(0, 0, 0, 0.95) 70%
        );
        filter: blur(0px);
        transform: scale(0.9);
        z-index: 9999;
      }
      .boom.on {
        opacity: 1;
        animation: boom 700ms ease-out forwards;
      }
      @keyframes boom {
        0% {
          transform: scale(0.9);
          filter: blur(0px);
        }
        40% {
          transform: scale(1.06);
          filter: blur(1px);
        }
        100% {
          transform: scale(1.25);
          filter: blur(6px);
        }
      }

      /* Confetti-ish fragments */
      .frag {
        position: fixed;
        width: 10px;
        height: 10px;
        background: rgba(255, 255, 255, 0.85);
        border-radius: 2px;
        z-index: 10000;
        pointer-events: none;
        opacity: 0.95;
        will-change: transform, opacity;
      }
    </style>
  </head>
  <body>
    <div class="topbar">
      <div class="category" id="category">Category: ‚Äî</div>

      <div class="timer" id="turn">Turn: Player 1</div>

      <div class="timer" id="timer">Time: ‚Äî</div>
    </div>

    <div class="controls">
      <button class="ctrl" id="newRound">New Round</button>
      <button class="ctrl" id="resetLetters">Reset Letters</button>
    </div>

    <div class="board">
      <div class="ring" id="ring"></div>
      <div class="hint">Click letters to ‚Äúuse‚Äù them. Timer hits 0 ‚Üí üí•</div>
    </div>

    <div class="boom" id="boom"></div>

    <script>
      const categories = [
        "Things you pack for a trip",
        "Movies",
        "Fruits",
        "Countries",
        "Something you find in a kitchen",
        "Animals",
        "Brands",
        "Sports",
        "Video games",
        "Things at the beach",
      ];

      const ring = document.getElementById("ring");
      const categoryEl = document.getElementById("category");
      const timerEl = document.getElementById("timer");
      const boomEl = document.getElementById("boom");
      const btnNewRound = document.getElementById("newRound");
      const btnResetLetters = document.getElementById("resetLetters");

      const letters = "ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");
      let interval = null;
      let timeLeft = 0;
      let gameOver = false;

      // Build ring
      function buildRing() {
        ring.innerHTML = "";
        const radius =
          parseFloat(
            getComputedStyle(document.documentElement).getPropertyValue("--r")
          ) || 160;
        letters.forEach((ch, i) => {
          const angle = (i / letters.length) * Math.PI * 2 - Math.PI / 2;
          const x = Math.cos(angle) * radius;
          const y = Math.sin(angle) * radius;

          const b = document.createElement("button");
          b.className = "letter";
          b.textContent = ch;
          b.style.transform = `translate(calc(-50% + ${x}px), calc(-50% + ${y}px))`;
          b.addEventListener("click", () => {
            if (gameOver) return;
            if (b.classList.contains("used")) return;
            b.classList.add("used");
          });
          ring.appendChild(b);
        });
      }

      function pickCategory() {
        const c = categories[Math.floor(Math.random() * categories.length)];
        categoryEl.textContent = `Category: ${c}`;
      }

      function setTimer(seconds) {
        timeLeft = seconds;
        timerEl.textContent = `Time: ${timeLeft.toFixed(0)}s`;
      }

      function startTimer() {
        clearInterval(interval);
        interval = setInterval(() => {
          timeLeft -= 0.1;
          if (timeLeft < 0) timeLeft = 0;

          timerEl.textContent = `Time: ${Math.ceil(timeLeft)}s`;

          // urgency effect
          if (timeLeft <= 3 && !gameOver) document.body.classList.add("shake");
          else document.body.classList.remove("shake");

          if (timeLeft <= 0) {
            clearInterval(interval);
            explode();
          }
        }, 100);
      }

      function resetLetters() {
        document
          .querySelectorAll(".letter")
          .forEach((b) => b.classList.remove("used"));
      }

      function newRound() {
        gameOver = false;
        boomEl.classList.remove("on");
        document.body.classList.remove("shake");
        clearFragments();
        pickCategory();
        resetLetters();
        const randomSeconds = Math.floor(7 + Math.random() * 14); // 7..20
        setTimer(randomSeconds);
        startTimer();
      }

      function clearFragments() {
        document.querySelectorAll(".frag").forEach((f) => f.remove());
      }

      function explode() {
        gameOver = true;
        document.body.classList.remove("shake");
        boomEl.classList.add("on");

        // spawn fragments
        const count = 90;
        for (let i = 0; i < count; i++) {
          const f = document.createElement("div");
          f.className = "frag";
          const startX = window.innerWidth / 2;
          const startY = window.innerHeight / 2;
          f.style.left = startX + "px";
          f.style.top = startY + "px";

          const angle = Math.random() * Math.PI * 2;
          const dist = 150 + Math.random() * 700;
          const endX = startX + Math.cos(angle) * dist;
          const endY = startY + Math.sin(angle) * dist;

          const rot = (Math.random() * 720 - 360).toFixed(0);
          const dur = 500 + Math.random() * 700;

          document.body.appendChild(f);

          f.animate(
            [
              { transform: `translate(0,0) rotate(0deg)`, opacity: 1 },
              {
                transform: `translate(${endX - startX}px, ${
                  endY - startY
                }px) rotate(${rot}deg)`,
                opacity: 0,
              },
            ],
            {
              duration: dur,
              easing: "cubic-bezier(.2,.8,.2,1)",
              fill: "forwards",
            }
          );
        }

        // lock UI text
        categoryEl.textContent = "üí• BOOM. Page exploded.";
        timerEl.textContent = "Time: 0s";
      }

      // Wire controls
      btnNewRound.addEventListener("click", newRound);
      btnResetLetters.addEventListener("click", () => {
        if (gameOver) return;
        resetLetters();
      });

      // Init
      buildRing();
      newRound();
    </script>
  </body>
</html>
